# Pull Request 提出ガイドライン

## 基本姿勢

### t-wadaさんの考え方を参考に
- **設計は仮説、テストで検証**
- **常に疑問を持ち続ける**
- **謙虚さを忘れない**

## PR説明に含めるべき内容

### 1. 実装順序の明確化
```markdown
## 実装手順
1. ❌ 失敗テスト作成 (TDD RED)
2. ✅ 最小実装 (TDD GREEN)  
3. ✅ リファクタリング (TDD REFACTOR)
4. ✅ 統合テスト追加
5. ✅ ドキュメント更新

### 各ステップでの意思決定
- なぜこの順序にしたか
- 各段階で何を学んだか
- どの部分で迷ったか
```

### 2. 未実装事項の明示
```markdown
## まだやっていないこと
- [ ] GPIO/I2C/SPI監視機能
- [ ] 実際のシリアルデバイス接続での動作確認
- [ ] パフォーマンステスト

## やる必要があること
- [ ] エラーハンドリング強化
- [ ] ログレベル調整
- [ ] セキュリティ監査

## やらないといけないかもしれないこと
- [ ] Redis冗長化検討
- [ ] 監視対象サブシステム拡張
- [ ] メモリ使用量最適化
```

### 3. 謙虚な疑問の提示
```markdown
## 本当にこれでいいのか？
- udev監視だけで十分か？
- Redis単一障害点で大丈夫か？
- 特権コンテナの最小化は適切か？
- テストカバレッジは十分か？
- エラーケースの考慮は足りているか？

## レビュワーに確認してほしい点
- アーキテクチャ選択の妥当性
- セキュリティ観点での懸念
- パフォーマンス要件との整合性
```

### 4. 設計判断の根拠
```markdown
## なぜこの設計にしたか
- pyudev選択理由: 軽量性とPython親和性
- Redis選択理由: pub/subパターンの簡潔性
- 特権コンテナ選択理由: /dev直接アクセス必要性

## なぜこの設計にしなかったか
- ファイルベース監視を避けた理由: リアルタイム性不足
- REST API を避けた理由: イベント駆動型要件
```

## チェックリスト

### コード品質
- [ ] TDDサイクルを完走したか
- [ ] テストカバレッジは十分か
- [ ] エラーハンドリングは適切か
- [ ] ドキュメントは更新されているか

### セキュリティ
- [ ] 最小権限原則に従っているか
- [ ] 秘密情報の漏洩はないか
- [ ] 入力値検証は適切か

### 運用性
- [ ] ログは適切に出力されているか
- [ ] ヘルスチェックは実装されているか
- [ ] 設定は外部化されているか

## 心構え

1. **完璧を求めない** - Phase分割で段階的改善
2. **疑問を隠さない** - 分からないことは素直に質問
3. **判断根拠を明示** - なぜそうしたかを説明
4. **未来への配慮** - 拡張性と保守性を考慮
5. **チームとの対話** - レビューは学習機会

## 参考文献
- t-wada氏のTDD/設計思想
- "Clean Architecture" - Robert C. Martin
- "Test Driven Development" - Kent Beck